<!DOCTYPE html>
<html ng-app="ionicApp">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title></title>

    <link href="lib/ionic/css/ionic.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

    <!-- IF using Sass (run gulp sass first), then uncomment below and remove the CSS includes above
    <link href="css/ionic.app.css" rel="stylesheet">
    -->

    <!-- ionic/angularjs js -->
    <script src="lib/ionic/js/ionic.bundle.js"></script>

    <!-- cordova script (this will be a 404 during development) -->
    <script src="cordova.js"></script>

    <!-- your app's js -->
    <script src="js/app.js"></script>
    <script src="js/controllers.js"></script>
    <script src="js/services.js"></script>
    <script src="js/main.js"></script>
      <script>
      window.params = function(){
          var params = {};
          var param_array = window.location.href.split('?')[1].split('&');
          for(var i in param_array){
              x = param_array[i].split('=');
              params[x[0]] = x[1];
          }
          return params;
      }();    

      console.log(window.params.event_id);
      </script>
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>

  <body ng-controller="MainCtrl">
  <ion-side-menus>
  <ion-side-menu side="left">
            <div class="sizelogo">
           <ion-list>
            <img src="img/logo.png">
           </ion-list>
           </div>
          <div class="size">
           <button class="button-full button-clear" onClick="javascript:location.replace('menu.html')">
           <ion-list>
            <ion-item>
            <div class="c"><i class="ion-information-circled"> Information </i></div>
            </ion-item>
            </ion-list>
            </button>
          <button class="button button-full button-clear button-positive" onClick="javascript:location.replace('donation.html')">
           <ion-list>
            <ion-item>
            <div class="c"><i class="ion-waterdrop">  Donation</i></div>
            </ion-item>
          </ion-list>
          </button>
          <button class="button button-full button-clear button-positive" onClick="javascript:location.replace('requests.html')">
          <ion-list>
              <ion-item>
               <div class="c"><i class="ion-document-text"> Requests</i></div>
           </ion-item>
           </ion-list>
           </button>
           <button class="button button-full button-clear button-positive" onClick="javascript:location.replace('events.html')">
           <ion-list>
            <ion-item>
            <div class="c"><i class="ion-compose"> Create Events</i></div>
          </ion-item>
          </ion-list>
          </button>
          <button class="button button-full button-clear button-positive" onClick="javascript:location.replace('location.html')">
          <ion-list>
            <ion-item>
            <div class="c"><i class="ion-location"> Location</i></div>
            </ion-item>
          </ion-list>
          </button>
          <button class="button button-full button-clear button-positive" onClick="javascript:location.replace('list.html')">
          <ion-list>
            <ion-item>
            <div class="c"><i class="ion-clipboard"> List</i></div>
            </ion-item>
          </ion-list>
          </button>
          <button class="button button-full button-clear button-positive" onClick="javascript:location.replace('about.html')">
          <ion-list>
            <ion-item>
            <div class="c"><i class="ion-help-circled"> About</i></div>
            </ion-item>
          </ion-list>
          </button>
         </div>
      </ion-side-menu>
<body>
<ion-side-menu-content>
<div class="bar bar-header bar-assertive">
    <button class="button button-icon icon ion-navicon" ng-click="toggleLeft()"></button>
    <div class="h1 title">List Donation</div>
     <button class="button button-clear" onClick="javascript:location.replace('profile.html')"><i class="ion-person"></i></button>
    </button>
    </div>
<ion-pane>
    <div class="tabs tabs-top tabs-icon-left">
  <a class="tab-item"  onclick="javascript:location.replace('list.html')">
    <i class="icon ion-waterdrop"></i>
    Donation
  </a>
  <a class="tab-item" onclick="javascript:location.replace('listevents.html')">
     <i class="icon ion-compose" ></i>
    Event
  </a>
  <a class="tab-item"  onclick="javascript:location.replace('listrequests.html')">
    <i class="icon ion-email"></i>
    Requests
  </a>
  </div>
  <ion-content>
<div class="card" style="padding:10px;text-align:center;margin-top:130px;">
          <form action="list.html" method="get" enctype='application/json'>
          <div class="list">
            <label class="item item-input item-select">
              <div class="input-label">Select Event</div>
              <div id="id01"></div>
            </label>
              <script>
              getMyJson("http://eritrosit.bajau.com:8100/eritrosit/api/listevent");

              function myFunction(arr) {
                  var out = "";
                  out += '<select name="event_id" id="event_id">';
                  for(i = 0; i < arr.length; i++) {
                    out += '<option value="'+arr[i].id+'">';
                    out += arr[i].name;
                    out += '</option>';
                  }
                  out += '</select>';
                  //console.log(out);
                  document.getElementById("id01").innerHTML = out;
              }
              </script>
          </div>
          <input class="button button-block" type="submit" value="Show Donatur Registered">
        </form>
         </ion-content>
        </ion-pane>
       </ion-side-menu-content>
        <div id="id03"></div>
        <script>
        getMyJson2("http://eritrosit.bajau.com:8100/eritrosit/api/listdonation/"+window.params.event_id);

        function myFunction2(arrlist) {
            var out2 = '<div class="card" style="padding:10px;text-align:center;">';
            var j = 0;
            out2 += "";
            out2 += "<div class='list'>";
            for(j = 0; j < arrlist.length; j++) {
              out2 += '<a class="item item-icon-left" href="#">';
              out2 += '<i class="icon ion-person-stalker"></i>'+arrlist[j].profile_lasname+','+arrlist[j].profile_firstname;
              out2 += '<span class="badge badge-assertive">'+arrlist[j].profile_bloodtype+'</span></a>';
            }
            out2 += "</div>";
            out2 += "</div>";
            //console.log(out2);
            document.getElementById("id03").innerHTML = out2;
        }
        </script>
      </div>
  </body>
  </button>
  </div>
  </ion-side-menu>
  </ion-side-menus>
  </body>
  </html>
